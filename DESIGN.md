We can first look to the templates folder to see how the webpage works. The layout.html file has most of the code that creates the webpage. In the head of the html, there is some code that connects bootstrap and a css file named style in the static folder. The title of the page is Scheduling Tool. In the body of the webpage I first create a navbar using some bootstrap resources. Within the navbar is the form that will contain all of the inputs. The form is sumbitted using the POST method which calls on my python code. After the form I wrote some jinja code which will put the html code in the index.html file into the layout page. Within the index.html file, I simply have some code that creates an iframe for a newly created pdf to be put onto the webpage. The style.css file in the static folder helps make the iframe responsive.

Within the app.py file lies all of my python code. The very top of my code imports the libraries I will use and configures flask. Then I configure a SQLite database and naming the connection cursor db. After that I defined some functions which I will use later in the code. The first function is used to determine whether the charge day for the client should be changed for option 1. The second, third, and fourth functions change the fill color for the cells of the pdf based on what membership type the client bought. Finally the last function returns a numerical string of a month based on the alphabetical name of that month. This will aslo be used later.

After these functions I create a route that is called when the form in layout.html is submitted. This route calls on the index function which, if called through GET simply clears all databases and re-renders the page. Otherwise, if called through POST, the calendar algorithm begins. The first thing that happens is that it makes sure that schedule.db, my database file, is completely clear. Next, all of the user inputs in the layout.html page are stored in variables, or, if left empty, made into default variables.

Next I run a while lopp spanning 366 days plus a leap year so that every day for an entire year plus the first one of next year is accounted for. In this while loop I go through every day, starting with the purchase day, after the purchase day and inserts a row with information into my sql database. My sql database has two tables with identical variables, except each table will have different values within these variables that will be determined based on whether the calendar is option 1 or 2. The while loop goes through every single day and marks which days the client can be scheduled, the date, the weekday, whether or not ther is an appointment on any given day (which is always no for now), whether the client will be charged on that day (no for now), and whether or not its a holliday. All in all this while loop helps me create all 366+ days into my sequel table and pans through which days should be ignored, the ones that the client can't be scheduled in and hollidays.

After the while loop I run a for loop that will be used to alter the first table based on the option 1 criteria. This for loop goes through every day created in the earlier while loop within the for loop I create variables that tell me if a person can be scheduled the day before so that if the algorithm accidentally schedules them on a weekend or a holliday they can be schedeuled the day before. Next I create a quick conditional statment that determines which days to schedule a client. It does this by determining if the current day is the same day of the month as the purchase day or if its halfway between two purchase dates. Next I include a conditional for whether the client wants to be scheduled in the weekends only or not. If the client wants to be scheduled in the weekends only then it looks at the day that they would have had their appointment had they not wanted weekends only and changes that day to the closest Saturday. If the client didn't want weekends only then it updates the table to what days the client will be scheduled, charged, or both.

After this comes the algorithm for option 2. Like option 1 I use a for loop to go through every day in the option 2 table. This loop works almost exactly like in option 1, but instead of being charged on the same day and scheduled every charge day and the day between charges, the client is charged every 28 days and scheduled for an appointment every 14 days. The only time the appointment day changes is when ther is a holliday that closes the store on that day.

Next I make an algorithm that determines what day of the week the first day of every month is depending on the year and stores them into a list.

Finally I move on to the cration of the pdf. I use the fpdf library to do this. First I create the pdf page and set the fill color to a default white, and make the font and font size for the header of the document. Next I create four cells that go on two rows (two on each row). In these cells I write down the mebership type, the store location, the clients name, and a cell for their signature. I fill out these cells based on the inputs the user entered into the html form. Next I create a list called months that, depending on the starting month, will later store all of the months in order for the upcoming year. I did this by iterating the starting month value through several conditionals that would add a premade list to the months list. After this I created the titles for each calendar options respectively and outputed them in their own cell on the pdf.

The last big algorithm in my project is a loop that printed all of the calendars and calendar cells on to the pdf. I did this by making 7 for loops that would print out months in pairs. Within this for loop I had a couple of count variables keeping track of what month it was currently on so that it could output the name of the month at the top of the calender cells. Within this loop too, I ran conditions which determined how many days the month had so that I could set a month count limit which would tell my program to stop printing the days after the last day of the month had passed. Within this loop I ran another for loop which would create 6 rows of cells which represented 6 weeks in a month. The reason why I chose 6 rows of cells was because the most different weeks a month could possibly have is 6 so 6 rows accomodates for any possibility. at the very top of the cells of each month I printed out the days of the week so that the client could know what day of the week a specific day was on. Next I used another for loop that would loop 4 times because on each row of the pdf, a section of one of four months would be printed so that the end result had two pairs of month. One pair for the option 1 calendar and one pair for the option 2 calendar. Within these loops theres a lot of conditionals. The first set of conditionals narrows down the first day to print out by matching what the firstday of the week of the specific month is and waiting until the cell matches that day of the week before it prints the first day. After it prints the first day the  number of days printed gets stored in a count variable so that when it reaches the max number of days for a specific month, it stops printing numbers. Because the code is printing parts of two different calendars and 4 different months per row, the code has several flag variables so and variables meant to store count variables before they reset so that each month is printed approprriately. Moreover, when the algorithm has determined that it can print out a day in the calendar, it also checks with the tables of the respective calendars so that if that day is an appointment, a charge day, or both, it can fill in the cell with a color so that it can be shown as a day of interest. The first couple of conditionals determine all of this, but when the original loop gets to the last loop marking the last month to be printed, another sequence of almost identical conditionals is used so that only two months per row are printed instead of the usual four.

Finally the code creates a couple more cells at the very bottom of the text that display a color key for what each color in the calendar means. With this done, the pdf is saved and stored in the static file named schedule.pdf and the index function ends by rendering the pdfon to the webpage by calling index.html.